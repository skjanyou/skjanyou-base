package com.skjanyou.vfs;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

public final class VFS {
	private VFS vfs = new VFS();
	private Map<String,FileSystemProvider> providers = new HashMap<String,FileSystemProvider>();
	
	private VFS(){
		
	}
	
	public VFS addFileSystemProvider(FileSystemProvider fsp){
		providers.put(fsp.getSchema(), fsp);
		return vfs;
	}
	
	public FileObject get(String path){
		FileObject result = null;
		Collection<FileSystemProvider> ps  = providers.values();
		for(FileSystemProvider fsp : ps){
			if(fsp.isMatch(path)){
				result = fsp.resolver(path);
				break;
			}
		}
		
		return result;
	}
}
